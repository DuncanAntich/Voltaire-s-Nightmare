namespace = high_kingdom

# Gain High kingship
country_event = {
    id = high_kingdom.1
    title = high_kingdom.1.t
    desc = high_kingdom.1.d
    picture = GOOD_WITH_MONARCH_eventPicture

    trigger = {
        OR = {
            any_subject_country = {
                is_subject_of_type = ire_trib_state
            }
            has_country_modifier = high_king_revolter
        }
        is_subject = no
        NOT = {has_country_modifier = high_king_ireland}
        is_at_war = no
    }

    mean_time_to_happen = {
        months = 0
    }

    option = {
        name = high_kingdom.1.a
        add_country_modifier = {
            name = "high_king_ireland"
            duration = -1
        }
        if = {
            limit = {
                has_country_modifier = high_king_revolter
            }
            remove_country_modifier = high_king_revolter
            every_country = {
                limit = { has_country_modifier = high_king_ireland }
                every_subject_country = {
                    country_event = {
                        id = high_kingdom.3
                        days = 50
                    }
                }
                ROOT = {
                    create_subject = {
                        who = PREV
                        subject_type = ire_trib_state
                    }
                }
            }
            every_country = {
                limit = {
                    primary_culture = irish
                    NOT = ROOT
                }
                country_event = {
                    id = high_kingdom.3
                    days = 50
                }
            }
        }
    }
}
# Lose High Kingship/Independence War
country_event = {
    id = high_kingdom.2
    title = high_kingdom.2.t
    desc = high_kingdom.2.d
    picture = ANGRY_MOB_eventPicture

    trigger = {
        OR = {
            has_country_modifier = high_king_ireland
            has_country_modifier = high_king_revolter
        }
        is_subject = yes
    }

    mean_time_to_happen = {
        months = 0
    }

    option = {
        name = high_kingdom.2.a
        remove_country_modifier = high_king_ireland
        remove_country_modifier = high_king_revolter
        add_country_modifier ={
            name = "disgraced_nation"
            duration = 3650
        }
    }
}
#Dispute New high King
country_event = {
    id = high_kingdom.3
    title = high_kingdom.3.t
    desc = high_kingdom.3.d
    picture = BATTLE_eventPicture

    is_triggered_only = yes

    #Claim It!
    option = {
        name = high_kingdom.3.a
        ai_chance = {
            factor = 10
            modifier = {
                factor = 2
                NOT = {
                    has_opinion = {
                        who = PREV
                        value = 0
                    }
                }
            }
            modifier = {
                factor = 0.5
                marriage_with = PREV
            }
            modifier = {
                factor = 0.5
                has_opinion = {
                    who = PREV
                    value = 100
                }
            }
            modifier = {
                factor = 0
                alliance_with = PREV
            }
        }
        every_country = {
            limit = {has_country_modifier = high_king_ireland}
            ROOT = {
                declare_war_with_cb = {
                    who = PREV
                    casus_belli = independence
                }
            }
        }
        add_stability = -1
        add_country_modifier = {
            name = "high_king_revolter"
            duration = -1
        }
    }

    #Don't
    option = {
        name = high_kingdom.3.b
        ai_chance = {
            factor = 90
        }
    }
}
#Become Revolter
country_event = {
    id = high_kingdom.4
    title = high_kingdom.4.t
    desc = high_kingdom.4.d
    picture = ANGRY_MOB_eventPicture

    trigger = {
        primary_culture = irish
        is_in_war = {
            casus_belli = independence
        }
        any_country = {
            is_in_war = {
                attacker_leader = ROOT
                defender_leader = THIS
                casus_belli = independence
            }
        }
    }

    mean_time_to_happen = {
        months = 0
    }

    option = {
        name = high_kingdom.4.a
        add_country_modifier = {
            name = high_king_revolter
            duration = -1
        }
        add_stability = -1
    }
}
